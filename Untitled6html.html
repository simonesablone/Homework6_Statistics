<!DOCTYPE html>
<html>
<head>
    <title>Security Score Trajectories</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .deleted-system {
            border-bottom: 2px solid red;
        }
    </style>
</head>
<body>
    <div>
        <label for="systemsInput">Number of Systems (M):</label>
        <input type="number" id="systemsInput" placeholder="Enter M" min="1" value="50">
        <label for="attacksInput">Number of Attacks (N):</label>
        <input type="number" id="attacksInput" placeholder="Enter N" min="1" value="100">
        <label for="probabilityInput">Penetration Probability (p):</label>
        <input type="number" id="probabilityInput" placeholder="Enter p" min="0" max="1" step="0.01" value="0.3">
        <label for="penetrationScoreInput">Penetration Score (P):</label>
        <input type="number" id="penetrationScoreInput" placeholder="Enter P" min="0" step="0.1" value="0.5">
        <label for="securityScoreInput">Security Score (S):</label>
        <input type="number" id="securityScoreInput" placeholder="Enter S" min="1" step="1" value="5">
        <button id="simulateButton">Simulate Trajectories</button>
    </div>
    <div>
        <canvas id="detailed-chart" width="800" height="400"></canvas>
    </div>

    <script>
        function generateRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function simulateSecurityScores(M, N, p, P, S) {
            const scores = [];
            const colors = Array.from({ length: M }, () => generateRandomColor());
            
            for (let i = 0; i < M; i++) {
                const systemScores = [];
                let deleted = false;
                
                for (let j = 0; j < N; j++) {
                    let score;
                    if (!deleted) {
                        if (Math.random() <= p) {
                            score = -1; // Penetration occurred
                            if (score <= -P) {
                                deleted = true;
                                break; // Stop processing attacks for this system
                            }
                        } else {
                            score = 1; // No penetration
                            if (score < S) {
                                score = S; // Security score
                            }
                        }
                        systemScores.push(score);
                    }
                }
                if (!deleted) {
                    scores.push({
                        data: systemScores,
                        borderColor: colors[i],
                        fill: false,
                        label: `System ${i + 1}`,
                    });
                }
            }
            return scores;
        }

        function drawDetailedChart(scores) {
            const ctx = document.getElementById("detailed-chart").getContext("2d");

            new Chart(ctx, {
                type: "line",
                data: {
                    labels: Array.from({ length: scores[0].data.length }, (_, i) => `Attack ${i + 1}`),
                    datasets: scores,
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                        },
                        x: {
                            title: {
                                display: true,
                                text: "Attacks",
                            },
                        },
                    },
                },
            });
        }

        document.getElementById("simulateButton").addEventListener("click", () => {
            const M = parseInt(document.getElementById("systemsInput").value);
            const N = parseInt(document.getElementById("attacksInput").value);
            const p = parseFloat(document.getElementById("probabilityInput").value);
            const P = parseFloat(document.getElementById("penetrationScoreInput").value);
            const S = parseInt(document.getElementById("securityScoreInput").value);

            const detailedChartCanvas = document.getElementById("detailed-chart");
            const ctx = detailedChartCanvas.getContext("2d");
            ctx.clearRect(0, 0, detailedChartCanvas.width, detailedChartCanvas.height);

            const scores = simulateSecurityScores(M, N, p, P, S);
            drawDetailedChart(scores);
        });
    </script>
</body>
</html>



























